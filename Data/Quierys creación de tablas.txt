CREATE TABLE USUARIOS
(    
    TIPO_ID NUMBER (1),
    NUMERO_ID NUMBER (10),
    LOGIN VARCHAR(50) NOT NULL,
    PALABRA_CLAVE VARCHAR(50) NOT NULL,
    ROL NUMBER(1) NOT NULL,
    NOMBRE VARCHAR (50) NOT NULL,
    NACIONALIDAD VARCHAR (50) NOT NULL,
    DIRECCION VARCHAR (50) NOT NULL,
    CORREO VARCHAR (50) NOT NULL,
    TELEFONO NUMBER (10) NOT NULL,
    CIUDAD VARCHAR (50) NOT NULL,
    DEPARTAMENTO VARCHAR (50) NOT NULL,
    CODIGO_POSTAL NUMBER (6) NOT NULL
)

ALTER TABLE USUARIOS
ADD CONSTRAINT PK_USUARIOS
PRIMARY KEY (TIPO_ID, NUMERO_ID);

ALTER TABLE USUARIOS 
ADD CONSTRAINT CK_ROL
CHECK (ROL < 5);

CREATE TABLE EMPLEADOS
(
    CEDULA NUMBER (10),
    NOMBRE VARCHAR (50) NOT NULL,
    TIPO NUMBER (1) NOT NULL
)

ALTER TABLE EMPLEADOS
ADD CONSTRAINT PK_EMPLEADOS
PRIMARY KEY (CEDULA);

ALTER TABLE EMPLEADOS 
ADD CONSTRAINT CK_TIPO
CHECK (TIPO < 4);

CREATE TABLE CUENTAS 
(
    TIPO_ID NUMBER(1),
    NUMERO_ID NUMBER (10),
    NUMERO_CUENTA NUMBER (20),
    TIPO_CUENTA NUMBER (1) NOT NULL,
    ESTADO NUMBER (1) NOT NULL, 
    SALDO NUMBER (10) NOT NULL,
    FECHA_CREACION DATE NOT NULL
)

ALTER TABLE CUENTAS
ADD CONSTRAINT FK_C_USUARIOS
FOREIGN KEY (TIPO_ID, NUMERO_ID) REFERENCES USUARIOS (TIPO_ID, NUMERO_ID);

ALTER TABLE CUENTAS
ADD CONSTRAINT PK_CUENTAS
PRIMARY KEY (TIPO_ID, NUMERO_ID, NUMERO_CUENTA);

ALTER TABLE CUENTAS 
ADD CONSTRAINT CK_ESTADO
CHECK (ESTADO < 3);

CREATE TABLE PUESTOS_ATENCION
(
    ID_PUNTO NUMBER(10),
    EMPLEADO NUMBER (10),
    TIPO_PUNTO NUMBER (1) NOT NULL,
    LUGAR VARCHAR (50) NOT NULL
)

ALTER TABLE PUESTOS_ATENCION
ADD CONSTRAINT FK_P_EMPLEADOS
FOREIGN KEY (EMPLEADO) REFERENCES EMPLEADOS (CEDULA);

ALTER TABLE PUESTOS_ATENCION
ADD CONSTRAINT PK_PUESTOS_ATENCION
PRIMARY KEY (ID_PUNTO, EMPLEADO);

CREATE TABLE PRESTAMOS
(
    ID_PRESTAMO NUMBER (10),
    TIPO_ID NUMBER (1),
    NUMERO_ID NUMBER (10),
    TIPO_PRESTAMO NUMBER (1) NOT NULL,
    MONTO NUMBER (10) NOT NULL,
    ESTADO NUMBER (1) NOT NULL,
    SALDO NUMBER (10) NOT NULL
)

ALTER TABLE PRESTAMOS
ADD CONSTRAINT FK_P_USUARIOS
FOREIGN KEY (TIPO_ID, NUMERO_ID) REFERENCES USUARIOS (TIPO_ID, NUMERO_ID);

ALTER TABLE PRESTAMOS
ADD CONSTRAINT PK_PRESTAMOS
PRIMARY KEY (ID_PRESTAMO, TIPO_ID, NUMERO_ID);

ALTER TABLE PRESTAMOS 
ADD CONSTRAINT CK_SALDO
CHECK (SALDO < = MONTO);

CREATE TABLE OPERACIONES
(
    ID_OPERACION NUMBER(10),
    TIPO_ID NUMBER (1),
    NUMERO_ID NUMBER (10),
    NUMERO_CUENTA NUMBER (20),
    VALOR NUMBER (10) NOT NULL,
    PUESTO_ATENCION NUMBER (10),
    EMPLEADO NUMBER (10),
    FECHA DATE NOT NULL,
    TIPO NUMBER (1) NOT NULL
)

ALTER TABLE OPERACIONES
ADD CONSTRAINT PK_OPERACIONES
PRIMARY KEY (ID_OPERACION);

ALTER TABLE OPERACIONES
ADD CONSTRAINT FK_O_CUENTAS
FOREIGN KEY (TIPO_ID, NUMERO_ID, NUMERO_CUENTA) REFERENCES CUENTAS (TIPO_ID, NUMERO_ID, NUMERO_CUENTA);

ALTER TABLE OPERACIONES
ADD CONSTRAINT FK_O_PUESTOS_ATENCION
FOREIGN KEY (PUESTO_ATENCION, EMPLEADO) REFERENCES PUESTOS_ATENCION (ID_PUNTO, EMPLEADO);




fun void crearEmpleado(pCedula int, pNombre String, pTipo int){

INSERT INTO EMPLEADOS(cedula, nombre, tipo)
VALUES(pCedula, pNombre, pTipo)
}
